<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      name="viewport"
      content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"
    />
    <meta charset="utf-8" />
    <title>IvWidget</title>
    <base href="/" />

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <link rel="icon" type="image/x-icon" href="favicon.ico" />
    <script type="text/javascript" src="assets/bootstrapTheme.js"></script>
    <script type="text/javascript" src="assets/defaultConfig.js"></script>
    <script type="text/javascript" src="assets/scenario1.js"></script>
    <script type="text/javascript" src="assets/scenario2.js"></script>
    <script type="text/javascript" src="assets/lang/en.js"></script>
    <script type="text/javascript" src="assets/lang/fr.js"></script>
    <style>
      #container {
        margin: 0 auto;
        max-width: 500px;
        min-height: 300px;
      }

      #select-buttons {
        right: 0;
        bottom: 0;
        padding: 10px;
      }
    </style>
  </head>
  <body>
    <div id="container"></div>
    <div id="select-buttons">
      <select id="lang">
        <option value="fr">Fran√ßais</option>
        <option value="en">English</option>
      </select>
      <select id="theme">
        <option value="none">None</option>
        <option value="bootstrap">Bootstrap</option>
      </select>
      <select id="workflow">
        <option value="default">Default</option>
        <option value="scenario1">Scenario 1</option>
        <option value="scenario2">Scenario 2</option>
      </select>
    </div>
    <script>
      let done = false;
      document.addEventListener('readystatechange', () => {
        if (!done) {
          done = true;
          console.log(IvWidget.config.default);
          setTimeout(() => {
            const widget = createIvWidget('container', {
              idToken: '',
              steps: IvWidget.config.default,
              lang: {
                en: IvWidget.lang.en,
                fr: IvWidget.lang.fr
              }
            });

            document
              .getElementById('lang')
              .addEventListener('change', event => {
                widget.currentLang = event.target.value;
              });

            document.getElementById('theme').value = 'none';
            document
              .getElementById('theme')
              .addEventListener('change', event => {
                widget.theme =
                  event.target.value === 'bootstrap'
                    ? IvWidget.themes.bootstrap
                    : {};
              });

            document.getElementById('workflow').value = 'default';
            document
              .getElementById('workflow')
              .addEventListener('change', event => {
                console.log('ok');
                switch (event.target.value) {
                  case 'default':
                    widget.steps = IvWidget.config.default;
                    break;
                  case 'scenario1':
                    widget.steps = IvWidget.config.scenario1;
                    break;
                  case 'scenario2':
                    widget.steps = IvWidget.config.scenario2;
                    break;
                }
              });

            setTimeout(() => {
              document.getElementById('theme').value = 'bootstrap';
              widget.theme = IvWidget.themes.bootstrap;
              document.getElementById('lang').value = 'fr';
              widget.currentLang = 'fr';
            }, 2000);
          }, 2000);
        }
      });
    </script>
  </body>
</html>
